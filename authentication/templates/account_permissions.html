<!DOCTYPE html>
<html lang="en">
  {% load static %}

  <head>
    <meta charset="UTF-8" />
    <title>Account</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="https://img.icons8.com/?size=512&id=sW8tkbsDrzOi&format=png"
    />
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <!-- MDB -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.0/mdb.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>

  <body>
    <div class="container-fluid">
      <div class="row justify-content-center" style="padding-top: 20%">
        <div class="col-sm-4 justify-content-center">
          <h4>FB Connect</h4>
          <h4 style="margin-bottom: 12px">{{ user.email }}</h4>
          <form method="POST" style="text-align: center" id="perm-form">
            {% csrf_token %} {{ form.as_p }}
            <input
              class="btn btn-primary"
              type="button"
              value="Back"
              style="margin-top: 20px; width: 100px; margin-right: 20px"
              onclick="goBack()"
            />
            <button
              class="btn btn-primary"
              type="submit"
              value="Save"
              id="perm-sbm-btn"
              style="margin-top: 20px; width: 100px"
            >
              Save
              <!--              data-toggle="modal"-->
              <!--              data-target="#loadingModal"-->
            </button>
          </form>
        </div>
      </div>
    </div>
    <script>
      function goBack() {
        window.history.back();
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <script>
      var form = document.getElementById("perm-form");
      var button = document.getElementById("perm-sbm-btn");

      form.addEventListener("submit", function (event) {
        event.preventDefault();

        button.disabled = true;

        var spinner = document.createElement("button");
        spinner.className = "btn btn-primary";
        spinner.type = "button";
        spinner.disabled = true;
        spinner.style = "margin-top: 20px;";
        spinner.innerHTML =
          '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>  Saving...';

        button.parentNode.replaceChild(spinner, button);
        form.submit();
      });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.0/mdb.min.js"
    ></script>
  </body>
</html>
